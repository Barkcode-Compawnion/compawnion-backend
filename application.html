<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Adoption Application</title>
</head>
<body>
    <h1>Pet Adoption Application Form</h1>

    <!-- Form to submit an application -->
    <form id="applicationForm">
        <label for="applicationType">Application Type:</label>
        <input type="text" id="applicationType" name="applicationType" required>
        
        <label for="agreement">Agreement:</label>
        <input type="checkbox" id="agreement" name="agreement" required>
        
        <label for="paymentAgreement">Payment Agreement:</label>
        <input type="checkbox" id="paymentAgreement" name="paymentAgreement" required>
        
        <label for="petOwnershipExperience">Pet Ownership Experience:</label>
        <input type="text" id="petOwnershipExperience" name="petOwnershipExperience" required>

        <!-- Dwelling details -->
        <fieldset>
            <legend>Dwelling Details</legend>
            <label for="planningToMoveOut">Planning to Move Out:</label>
            <input type="checkbox" id="planningToMoveOut" name="planningToMoveOut">
            
            <label for="ownership">Ownership:</label>
            <input type="text" id="ownership" name="ownership">
            
            <label for="numberOfPets">Number of Pets:</label>
            <input type="number" id="numberOfPets" name="numberOfPets">
            
            <label for="petsAllowedInHouse">Pets Allowed In House:</label>
            <input type="checkbox" id="petsAllowedInHouse" name="petsAllowedInHouse">
            
            <label for="numberOfHouseMembers">Number of House Members:</label>
            <input type="number" id="numberOfHouseMembers" name="numberOfHouseMembers">
            
            <label for="dwellingType">Dwelling Type:</label>
            <input type="text" id="dwellingType" name="dwellingType">
        </fieldset>

        <label for="veterinaryClinicName">Veterinary Clinic Name:</label>
        <input type="text" id="veterinaryClinicName" name="veterinaryClinicName">

        <!-- Applicant details -->
        <fieldset>
            <legend>Applicant Details</legend>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>

            <label for="street">Street:</label>
            <input type="text" id="street" name="street" required>

            <label for="lot">Lot:</label>
            <input type="text" id="lot" name="lot" required>
        </fieldset>

        <label for="petId">Pet ID:</label>
        <input type="text" id="petId" name="petId" required>

        <button type="button" onclick="submitApplication()">Submit Application</button>
    </form>

    <script>
        async function submitApplication() {
            const formData = new FormData(document.getElementById('applicationForm'));
            const applicationData = {
                applicationType: formData.get('applicationType'),
                agreement: formData.has('agreement'),
                paymentAgreement: formData.has('paymentAgreement'),
                petOwnershipExperience: formData.get('petOwnershipExperience'),
                dwelling: {
                    planningToMoveOut: formData.has('planningToMoveOut'),
                    ownership: formData.get('ownership'),
                    numberOfPets: formData.get('numberOfPets'),
                    petsAllowedInHouse: formData.has('petsAllowedInHouse'),
                    numberOfHouseMembers: formData.get('numberOfHouseMembers'),
                    dwellingType: formData.get('dwellingType')
                },
                veterinaryClinicName: formData.get('veterinaryClinicName'),
                applicant: {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    street: formData.get('street'),
                    lot: formData.get('lot')
                },
                petId: formData.get('petId')
            };

            try {
                const response = await fetch('http://localhost:3000/application', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(applicationData)
                });
                const result = await response.json();
                alert(`Response: ${result.message}`);
            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting application');
            }
        }
    </script>
</body>
</html>
